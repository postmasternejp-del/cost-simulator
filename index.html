<div style="max-width:420px; padding:1em; border:1px solid #ccc; border-radius:8px; margin-top:1.5em;">
  <h4>ğŸ’¡çµŒè²»è¨ˆç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</h4>
  
  <label>
    <input type="radio" name="mode" value="total" checked onchange="switchMode()"> å¥‘ç´„é‡‘é¡ã‹ã‚‰è¨ˆç®—
  </label><br>
  <label>
    <input type="radio" name="mode" value="direct" onchange="switchMode()"> ç›´æ¥çµŒè²»ã‹ã‚‰è¨ˆç®—
  </label>
  
  <div id="inputArea" style="margin-top:10px;">
    <label id="inputLabel">å¥‘ç´„é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå††ï¼‰:</label><br>
    <input type="number" id="amount" placeholder="ä¾‹: 1000000" style="width:100%; padding:5px; margin:5px 0;">
  </div>
  
  <button onclick="calcCosts()" style="margin-top:8px; padding:6px 12px;">è¨ˆç®—ã™ã‚‹</button>
  <div id="result" style="margin-top:1em; font-weight:bold;"></div>
</div>

<script>
let mode = "total"; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å¥‘ç´„é‡‘é¡ãƒ¢ãƒ¼ãƒ‰

function switchMode() {
  const radios = document.getElementsByName("mode");
  for (const r of radios) {
    if (r.checked) mode = r.value;
  }
  const label = document.getElementById("inputLabel");
  const input = document.getElementById("amount");
  if (mode === "total") {
    label.innerText = "å¥‘ç´„é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå††ï¼‰:";
    input.placeholder = "ä¾‹: 1000000";
  } else {
    label.innerText = "ç›´æ¥çµŒè²»ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå††ï¼‰:";
    input.placeholder = "ä¾‹: 1000000";
  }
  document.getElementById("result").innerHTML = ""; // å‰ã®çµæœã¯ã‚¯ãƒªã‚¢
}

function calcCosts() {
  const amount = parseFloat(document.getElementById("amount").value);
  if (isNaN(amount) || amount <= 0) {
    document.getElementById("result").innerHTML = "æ­£ã—ã„é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
    return;
  }
  
  let total, direct, indirect;
  if (mode === "total") {
    total = amount;
    indirect = total * 0.2;
    direct = total - indirect;
  } else {
    direct = amount;
    indirect = direct * 0.2;
    total = direct + indirect;
  }
  
  document.getElementById("result").innerHTML =
    "ç·é¡: " + total.toLocaleString() + "å††<br>" +
    "ç›´æ¥çµŒè²»: " + direct.toLocaleString() + "å††<br>" +
    "é–“æ¥çµŒè²» (20%): " + indirect.toLocaleString() + "å††";
}
</script>
